# Диаграмма компонентов для мобильного приложения туристов

![image](https://github.com/miamib34ch/HSE-SoftwareArchitecture/assets/77894393/da7a70c0-beb5-4b1e-89eb-9ae8ca3b23a8)

# Диаграмма последовательности

![image](https://github.com/miamib34ch/HSE-SoftwareArchitecture/assets/77894393/11298299-325b-4aa8-8794-736101583364)

Краткие пояснения к предоставленной диаграмме последовательности:

1. **Открытие приложения:**  
   - Турист открывает мобильное приложение
  
2. **Просмотр маршрута:**
   - Турист запрашивает просмотр маршрута на `Карта`
   - `Карта` отправляет запрос на данные маршрута
   - `ViewModel` запрашивает данные маршрута у `Model`
   - `Model` обращается к серверу `Сервер` для получения данных маршрута
   - `Сервер` возвращает данные маршрута `Model`
   - `Model` передает данные маршрута `ViewModel`
   - `ViewModel` передает данные маршрута `Карта`, которое отображает маршрут для туриста

3. **Выбор маршрута и загрузка материалов:**
   - Турист выбирает точку маршрута
   - `Карта` отправляет запрос на текстовые и медиа материалы для выбранного маршрута `ViewModel`
   - `ViewModel` передает запрос на материалы `Model`
   - `Model` обращается к серверу (`Сервер`) для получения материалов
   - `Сервер` возвращает материалы `Model`
   - `Model` передает материалы `ViewModel`
   - `ViewModel` передает материалы `Карта`, которое отображает материалы для выбранной точки

4. **Просмотр дополненной реальности (AR):**
   - Турист переходит к просмотру дополненной реальности
   - Компонент AR (`Дополненная реальность`) запрашивает данные AR, отправляет запрос данных AR `ViewModel`
   - `ViewModel` передает запрос данных AR `Model`
   - `Model` обращается к серверу (`Сервер`) для получения данных AR
   - `Сервер` возвращает данные AR `Model`
   - `Model` передает данные AR `ViewModel`
   - `ViewModel` передает данные AR компоненту AR (`Дополненная реальность`), который отображает дополненную реальность для туриста

5. **Закрытие приложения:**  
   - Турист закрывает мобильное приложение
   
Данная диаграмма демонстрирует взаимодействие между актором (Туристом), контейнером `Клиент туристов`: компонентами `Карта`, `ViewModel`, `Model`, `Дополненная реальность`; контейнером `Сервер` при различных сценариях использования, отражая общий поток данных и запросов в системе.

# Модель базы данных

![image](https://github.com/miamib34ch/HSE-SoftwareArchitecture/assets/77894393/5fcc1a1f-7473-421c-9280-f9b7dda032ab)

Краткое пояснение к модели базы данных:

1. **`User` (Пользователь):**
   - Учетная запись пользователя системы.
   - Может создавать маршруты и связан с маршрутами, которые он создал, если isTurist == false.
2. **`Route` (Маршрут):**
   - Представляет маршрут в системе, который создан пользователем (`User`), у которого isTurist == false.
   - Содержит точки интереса и ссылку на маршрут.
   - Ассоциирован с пользователем, который создал маршрут.
3. **`PointOfInterest` (Точка интереса):**
   - Описывает ключевые места внутри маршрута.
   - Связана с материалами и AR-компонентой.
   - Содержит координаты места.
   - Принадлежит определенному маршруту.
4. **`Material` (Материал):**
   - Представляет собой контент, связанный с точками интереса.
   - Может быть текстом, изображением или видео.
   - Хранится путь на сервере до материала.
   - Привязан к точке интереса.
5. **`ARComponent` (AR-компонента):**
   - Содержит данные для расположения в пространстве в контексте дополненной реальности (AR).
   - Связана с точками интереса.

# Код с учетом принципов KISS, YAGNI, DRY и SOLID.

1. **KISS и SOLID:**  
   ```Swift
   class RouteService {
    
      func getRoutes(completion: @escaping ([Route]?, Error?) -> Void) {
         // Логика получения маршрутов из сети или хранилища данных
         // ...
        
         // В случае успеха
         completion(routes, nil)
        
         // В случае ошибки
         completion(nil, error)
      }
   }

   class PointOfInterestService {
    
      func getPointsOfInterest(routeId: Int, completion: @escaping ([PointOfInterest]?, Error?) -> Void) {
         // Логика получения точек интереса для конкретного маршрута
         // ...
        
         // В случае успеха
         completion(pointsOfInterest, nil)
        
         // В случае ошибки
         completion(nil, error)
       }
   }
   ```
   * **Принцип KISS (Keep It Simple, Stupid):**  
     Классы `RouteService` и `PointOfInterestService` предоставляют простые методы для получения маршрутов и точек интереса соответственно. Они скрывают сложность внутренней реализации, обеспечивая клиентскому коду простоту взаимодействия.
   * **Принцип единственной ответственности (SOLID):**  
   * Каждый из этих классов имеет одну основную ответственность - предоставление данных о маршрутах или точках интереса. Это облегчает поддержку, расширение и изменение кода.
2. **YAGNI и DRY:**  
   ```Swift
   let routeService = RouteService()
   let pointOfInterestService = PointOfInterestService()

   // Получение маршрутов
   routeService.getRoutes { (routes, error) in
      if let routes = routes {
        // Обработка маршрутов
      } else if let error = error {
        // Обработка ошибки
      }
   }

   // Получение точек интереса для конкретного маршрута
   let routeId = 123
   pointOfInterestService.getPointsOfInterest(routeId: routeId) { (pointsOfInterest, error) in
      if let pointsOfInterest = pointsOfInterest {
         // Обработка точек интереса
      } else if let error = error {
         // Обработка ошибки
      }
   }
   ```
   * Продемонстрована простота использования (относится к приницпу KISS)
   * **Принцип DRY (Don't Repeat Yourself):**  
     Логика обработки ответа от сервисов вынесена в замыкания обработчиков (`completion`), что позволяет избежать повторения кода при обработке результатов.
   * **Принцип YAGNI (You Aren't Gonna Need It):**  
     Реализована только минимально необходимая функциональность для получения маршрутов и точек интереса. Ненужные функции или избыточные детали отсутствуют. Например, не стали реализовывать удаление маршрутов, сейчас это не требуется и в постановке про это не сказано.
